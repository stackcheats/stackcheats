{"componentChunkName":"component---src-templates-blog-post-js","path":"/saml-bearer-grant-with-wso2-api-manager-identity-server/content/","result":{"data":{"site":{"siteMetadata":{"title":"StackCheats","author":"Athiththan Kathirgamasegaran"}},"mdx":{"id":"dd282726-5240-58fd-a768-566212990693","excerpt":"Greetings Everyone !!! ðŸ‘‹ In this medium, I will be walking through how to configure and generate an access token in WSO2 API Manager using SAML Bearer Grantâ€¦","frontmatter":{"title":"SAML Bearer Grant with WSO2 API Manager","date":"February 04, 2022","intro":"SAML Bearer Grant with WSO2 API Manager & Identity Server","tags":["wso2","wso2-api-manager","saml2","oauth2","bearer-grant"],"seo":"A simple guide configuring and generating Access Token in WSO2 API Manager using SAML Bearer grant","medium":"https://athiththan11.medium.com/saml-bearer-grant-with-wso2-api-manager-identity-server-3a77b7fa017f"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"SAML Bearer Grant with WSO2 API Manager\",\n  \"date\": \"2022-02-04\",\n  \"intro\": \"SAML Bearer Grant with WSO2 API Manager & Identity Server\",\n  \"short\": \"Generate Access Token with SAML Bearer Grant\",\n  \"medium\": \"https://athiththan11.medium.com/saml-bearer-grant-with-wso2-api-manager-identity-server-3a77b7fa017f\",\n  \"tags\": [\"wso2\", \"wso2-api-manager\", \"saml2\", \"oauth2\", \"bearer-grant\"],\n  \"seo\": \"A simple guide configuring and generating Access Token in WSO2 API Manager using SAML Bearer grant\",\n  \"cover\": \"cover.png\",\n  \"bgcolor\": \"#d0e0e3\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"Greetings-Everyone--\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#Greetings-Everyone--\",\n    \"aria-label\": \"Greetings Everyone   permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Greetings Everyone !!! \\uD83D\\uDC4B\"), mdx(\"p\", null, \"In this medium, I will be walking through how to configure and generate an access token in WSO2 API Manager using SAML Bearer Grant flow.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"As to demonstrate the flow and configurations, we will be using WSO2 API Manager v3.2.0 & WSO2 Identity Server v5.10.0\")), mdx(\"p\", null, \"As out-of-the-box, the WSO2 API Manager v3.2.0 supports SAML Bearer grant flow to generate access tokens by providing a valid SAML Assertion to the system.\"), mdx(\"p\", null, \"So, let\\u2019s dive in and start configuring our WSO2 API Manager & Identity Server to perform the SAML Bearer grant \\u2026\"), mdx(\"h2\", {\n    \"id\": \"-WSO2-API-Manager\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#-WSO2-API-Manager\",\n    \"aria-label\": \" WSO2 API Manager permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\uD83C\\uDF10 WSO2 API Manager\"), mdx(\"p\", null, \"Let\\u2019s start with configuring the WSO2 API Manager.\"), mdx(\"p\", null, \"As of the first step, we need a Service Provider configured in the API Manager environment to generate access tokens. We can either log in to the Devportal and create an Application to generate tokens or, we can log in to the Carbon Management console of the API Manager server and create a new Service Provider.\"), mdx(\"p\", null, \"For this demonstration, I will be focusing on creating a Service Provider from the Carbon Management console of the API Manager server.\"), mdx(\"h3\", {\n    \"id\": \"-Service-Provider\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#-Service-Provider\",\n    \"aria-label\": \" Service Provider permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\u270B Service Provider\"), mdx(\"p\", null, \"Let\\u2019s log in to the Carbon Management console of the API Manager server by firing up your favourite browser and navigating to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://localhost:9443/carbon\")), mdx(\"p\", null, \"Sign in to the console with the admin credentials. Once logged in, navigate to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Service Providers\"), \" section and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Add\"), \".\"), mdx(\"p\", null, \"Configure the Service Provider with the following information\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Service Provider Name: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"saml-bearer-sp\"))), mdx(\"p\", null, \"and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Register\"), \".\"), mdx(\"p\", null, \"On the next screen, expand the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Inbound Authentication Configuration\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth/OpenID Connect Configuration\"), \" and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \". Make sure, that you have selected the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML2\"), \" grant type in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Allowed Grant Types\"), \" and add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Callback URL\"), \" if you have enabled either \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Code\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Implicit\"), \" grant type. Once done, scroll down and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Add\")), mdx(\"p\", null, \"Make a note of the generated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth Client Key\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth Client Secret\"), \" of the Service Provider, as we will be using these credentials when invoking the Token endpoint with SAML Bearer Token grant.\"), mdx(\"p\", null, \"Click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Update\"), \" to save the Service Provider configurations.\"), mdx(\"p\", null, \"Next, we need to configure an Identity Provider in the API Manager server to validate the signature of the SAML Assertion that we are passing.\"), mdx(\"h3\", {\n    \"id\": \"-Identity-Provider\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#-Identity-Provider\",\n    \"aria-label\": \" Identity Provider permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\u270B Identity Provider\"), mdx(\"p\", null, \"Navigate to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Identity Providers\"), \" section and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Add\"), \" to add a new Identity Provider in the API Manager server.\"), mdx(\"p\", null, \"Configure the Identity Provider with the following inputs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Identity Provider Name: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"wso2is\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Display Name: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WSO2 IS\"))), mdx(\"p\", null, \"Expand the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Federated Authenticators\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML2 Web SSO Configuration\"), \" and perform the following\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable SAML2 Web SSO: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Service Provider Entity ID: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"wso2apim\"), \" \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"(enter the Service Provider Entity ID that you have registered in the IS server)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Identity Provider Entity ID: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"wso2is\"), \" \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"(enter the Identity Provider Entity ID of your IS Server)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"SSO URL: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://localhost:9444/samlsso\"), \" \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"(assuming that the Identity Server is running on a port offset of 1)\"))), mdx(\"p\", null, \"click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Register\")), mdx(\"p\", null, \"In addition to the above configurations, we also need to export the public certificate of the WSO2 Identity Server and import it under the created Identity Provider in the API Manager. This is because, we will be using the WSO2 Identity Server as our SAML provider, therefore the SAML Assertion is going to be signed with the private key of the Identity Server. Hence, in order to verify the signature of the assertion, we need to export and import the public certificate of the WSO2 Identity Server into API Manager.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you are planning to use any other SAML providers than WSO2 Identity Server, then it is required to import the public certificate of the respective provider in the created Identity Provider\")), mdx(\"p\", null, \"Execute the following command to export the public certificate from the WSO2 Identity Server. Run the commands from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<WSO2_IS_HOME>/repository/resources/security\"), \" directory\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Provide the WSO2 Carbon JKS Keystore password when prompted\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"keytool -export -keystore wso2carbon.jks -alias wso2carbon -file wso2carbon.crt\\n\")), mdx(\"p\", null, \"Now, we have exported the public certificate as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".crt\"), \" format. Execute the following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"openssl\"), \" command to convert the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".crt\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" format to upload certificate via the UI\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"openssl x509 -inform der -in wso2carbon.crt -out wso2carbon.pem\\n\")), mdx(\"p\", null, \"Now, that we have exported the public certificate of the WSO2 Identity Server as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" format, let\\u2019s upload it via the Carbon Management console. Navigate to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Identity Providers\"), \" section in the Carbon Management console of the WSO2 API Manager > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"List\"), \" > and click on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Edit\"), \" of our newly created Identity Provider.\"), mdx(\"p\", null, \"Under Choose IDP certificate type, select Upload IDP certificate and choose the exported public certificate. And click on Update to save the configurations.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"and Done!!!\"), \" \\uD83C\\uDF89 \\uD83C\\uDF89 \\uD83C\\uDF89\"), mdx(\"p\", null, \"We have now configured our WSO2 API Manager to successfully validate the SAML Assertion and to generate an access token using SAML Bearer grant flow.\"), mdx(\"h2\", {\n    \"id\": \"-Test--Verify\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#-Test--Verify\",\n    \"aria-label\": \" Test  Verify permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\uD83D\\uDD0D Test & Verify\"), mdx(\"p\", null, \"To try out and verify the SAML Bearer grant flow, let\\u2019s configure our existing API Manager to perform a federated authentication with the Identity Server using SAML SSO.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"This is an extra part of the configuration to acquire a valid SAML Response and Assertion from the WSO2 Identity Server to try out our SAML Bearer grant flow. If you have already acquired a SAML Assertion from the Identity Server using any App integration, then this section is not required for you to follow \\uD83D\\uDE03\")), mdx(\"p\", null, \"If you haven\\u2019t already started a WSO2 Identity Server, start one with a port offset of any desired (I will be using a port offset of 1 for this demonstration).\"), mdx(\"p\", null, \"Let\\u2019s start configuring the WSO2 Identity Server for our SAML SSO\"), mdx(\"h2\", {\n    \"id\": \"-WSO2-Identity-Server\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#-WSO2-Identity-Server\",\n    \"aria-label\": \" WSO2 Identity Server permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\uD83D\\uDD10 WSO2 Identity Server\"), mdx(\"h3\", {\n    \"id\": \"-Service-Provider-for-SAML-SSO\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#-Service-Provider-for-SAML-SSO\",\n    \"aria-label\": \" Service Provider for SAML SSO permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\u270B Service Provider for SAML SSO\"), mdx(\"p\", null, \"Open up your favourite browser and navigate to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://localhost:9444/carbon\"), \" and sign in to the Carbon Management console of the Identity Server using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" credentials.\"), mdx(\"p\", null, \"Go to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Service Providers\"), \" section and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Add\"), \". Create a Service Provider named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"wso2apim\"), \" and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Register\"), \".\"), mdx(\"p\", null, \"On the next screen, expand the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Inbound Authentication Configuration\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML2 Web SSO Configuration\"), \" and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Configure\"), \".\"), mdx(\"p\", null, \"Fill the form with the following\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Issuer: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"wso2apim\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Assertion Consumer URLs: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://localhost:9443/commonauth\"), \" \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"(and click on Add to add the URL)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Response Signing: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Signature Validation in Authentication Requests and Logout Requests: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Single Logout: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Attribute Profile: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Include Attributes in the Response Always: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Audience Restriction: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://localhost:9443/oauth2/token\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Recipient Validation: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://localhost:9443/oauth2/token\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Assertion Query Request Profile: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Idp Entity ID Alias: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"wso2is\"))), mdx(\"p\", null, \"and click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Register\")), mdx(\"p\", null, \"Since we have enabled the Signature validation in authentication requests and log out requests, we have to upload the WSO2 API Manager\\u2019s public certificate to the Service Provider that we have registered.\"), mdx(\"p\", null, \"Execute the following commands from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<WSO2_APIM_HOME>/repository/resources/security\"), \" directory\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Provide the WSO2 Carbon JKS Keystore password when prompted\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"keytool -export -keystore wso2carbon.jks -alias wso2carbon -file wso2carbon.crt\\n\")), mdx(\"p\", null, \"Now, we have exported the public certificate as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".crt\"), \" format. Execute the following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"openssl\"), \" command to convert the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".crt\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" format to upload certificate via the UI\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"openssl x509 -inform der -in wso2carbon.crt -out wso2carbon.pem\\n\")), mdx(\"p\", null, \"Navigate to the Service Provider that we have registered, and under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Basic\"), \" Information section, select the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Upload SP certificate\"), \" and upload the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" certificate under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Application Certificate\"), \". Once uploaded, click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Update\"), \" to update the configurations.\"), mdx(\"p\", null, \"Now, let\\u2019s move to WSO2 API Manager and configure the API Manager to initiate and perform the SAML2 Web SSO with WSO2 Identity Server from the Devportal.\"), mdx(\"h2\", {\n    \"id\": \"-WSO2-API-Manager-1\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#-WSO2-API-Manager-1\",\n    \"aria-label\": \" WSO2 API Manager 1 permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\uD83C\\uDF10 WSO2 API Manager\"), mdx(\"p\", null, \"As we have already registered an IDP in the API Manager server providing the URLs of the WSO2 IS, let\\u2019s open the same and make a few more adjustments for our SAML Web SSO requirement.\"), mdx(\"h3\", {\n    \"id\": \"-Identity-Provider-wso2is\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#-Identity-Provider-wso2is\",\n    \"aria-label\": \" Identity Provider wso2is permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\u270B Identity Provider: wso2is\"), mdx(\"p\", null, \"Log in to the Carbon Management console of the API Manager server and navigate to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Identity Providers\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"List\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Edit\"), \" the registered \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"wso2is\"), \" IDP.\"), mdx(\"p\", null, \"Expand the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Federated Authenticators\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML2 Web SSO Configuration\"), \" and perform the following\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Authentication Request Signing: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Assertion Signing: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Logout Request Signing: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable Authentication Response Signing: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"true\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Signature Algorithm: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"RSA with SHA1\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Digest Algorithm: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"MD5\"))), mdx(\"p\", null, \"click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Update\"), \".\"), mdx(\"p\", null, \"Next, we\\u2019ll configure the Devportal\\u2019s Service Provider to perform a Federated Authentication with WSO2 Identity Server.\"), mdx(\"h3\", {\n    \"id\": \"-Service-Provider-1\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#-Service-Provider-1\",\n    \"aria-label\": \" Service Provider 1 permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\u270B Service Provider\"), mdx(\"p\", null, \"Navigate to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Service Providers\"), \" > \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"List\"), \". Select and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Edit\"), \" the Service Provider that is registered for the Devportal, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apim_devportal\"), \".\"), mdx(\"p\", null, \"Expand the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Local & Outbound Authentication Configuration\"), \" and tick the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Federated Authentication\"), \" and select the registered IDP from the list, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"wso2is\"), \". Click on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Update\"), \" and save the configurations.\"), mdx(\"p\", null, \"Let\\u2019s make the configurations work!! \", mdx(\"br\", null), \"\\nOpen up the browser, and install the SAML Tracer extension to capture the SAML Responses while performing the SAML SSO. After installing the extension, hit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://localhost:9443/devportal\"), \" to go to Devportal. Click on the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SIGN-IN\"), \" button at the top-right corner.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Please make sure that the SAML Tracer extension is started and listening to the SAML transactions made in the browser.\")), mdx(\"p\", null, \"This will take you to the WSO2 Identity Server\\u2019s login page, as you will be able to see and confirm the behaviour by inspecting the URLs in the browser. Sign in with your user\\u2019s credential and capture the successful SAML Response using the SAML Tracer.\"), mdx(\"p\", null, \"Given below is a screenshot of the SAML Tracer and the SAML Response captured\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/b03a2223d48422420282c000b4e80e2b/4a2a8/saml_tracer_extension.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"78.37837837837837%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADa0lEQVQ4y62Sz2/jRBTHLXFE4uQTXFZmD4gLIhFwWK5Ie0RaetmqB8QfwAlVCCFxQYgLywEJaVu1Iqp2K9I2AkGbpWGXpmRTJ3HiH0kaO7aTOL+cNI4TO9mmScePGTeptndG+uj7ffNm3rOfTVHUV1Qx8/R1TmFvyxWdMeoaA+d5BmYY+4TpVTJMguOZlMAzf8WPmMPjOMMKOSYtiUxKFK6QhDcxt36LHrxCffnNz6+pBS5TbpSnjU5voDY7zp+FobMnDJ1fEk3nCac5p3LJUfSKYzRbTr3ddqyh49juCOPOGbl4bxg9jL1N3bt3hy7VeN3oFkGuxUGpJeFEYeHfUhISmgRCS4W6pcN08gLAQxgPAKE5l3MQXE4vILK7E6Q+uXuLPjOL8sguQM94ctlvxJDTiiG3HUOjzjEatOPIaieQ02GRjZX4XvMZslpxZJvPfYbdlNcr7XmhB58HqHc/eoeumVWl0a9BtppCQj0LQj0H2VoGkwbeSANXZUHpnsL4woFzzIuLIYwnQ+xdgjeZjsAZWfDocShI3b77Fl1sKUrRUuGweoye1hLwj5GEeO0EjvDrH1WTcGyw8LyegWSdgwRukGrkMFlIN3nINAUv184Dj/13D78NUh/eeZ9+FC8pEVaHX5+l0eO/0xBJyvC72Ie93BlEBAsifM9nJ9fBmLAj9DE27IoDgrcrOmDIafhj7esg9dnHH9Ddlq70OjU40zk0xk/h4u6uKcHYFHx12+KVmnO1DHDtFrj9JlbTI35sVWFn62GQWl75lDYkXbG659Doj1DftuGsZ8FgMADXdWE2m+GP6N3kcjZnCmg29TzsJ5MJhMP4Ky/fv0/zR5yiCzJUdBWVywqoqgrlchlkWQZN00DX9Wtd5FRVw3sk1jxtnt/c3MQFl5fpnMgr+OeFQqGAJEmCfD4PRHHsk89LsNhf5F7yHlFybn19/apgKpVS8pKf9AsWi0UQRfH6EjlMYsLLDedNvcUdv+DS0hLNsuwpz/OAucDMBEGYcRx3TSaT8SE+m83e2Mc6JZ7cW1tbC1ArKys07mySuSiK4lOpVKBarfozI34xvwVkjou5LnLk3MbGxntUIBB4NRQKfbG9vf3T1tbWD+Fw+EE0GvU5ODi49oT9/f0bMcnP+TEWi32/urr6BkUWAPwvkPUfWycFE5L4Wy8AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SAML Tracer Extension with sample SAML Response\",\n    \"title\": \"SAML Tracer Extension with sample SAML Response\",\n    \"src\": \"/static/b03a2223d48422420282c000b4e80e2b/6d370/saml_tracer_extension.png\",\n    \"srcSet\": [\"/static/b03a2223d48422420282c000b4e80e2b/c5084/saml_tracer_extension.png 148w\", \"/static/b03a2223d48422420282c000b4e80e2b/60cc9/saml_tracer_extension.png 295w\", \"/static/b03a2223d48422420282c000b4e80e2b/6d370/saml_tracer_extension.png 590w\", \"/static/b03a2223d48422420282c000b4e80e2b/540ae/saml_tracer_extension.png 885w\", \"/static/b03a2223d48422420282c000b4e80e2b/4a2a8/saml_tracer_extension.png 912w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Next, copy the raw SAML Response from the SAML Tracer extension (from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Parameters\"), \" tab and not \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SAML tab\"), \") and Base64 decode it.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Do not perform any prettifying or beautifying process on the XML response. If the XML response is prettified, you might encounter unmarshalling errors and unexpected behaviours when trying to generate the Access Token\")), mdx(\"p\", null, \"Extract the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"saml2:Assertion\"), \" content (including the opening and closing tags: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<saml2:Assertion ...>\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"</saml2:Assertion>\"), \") from the decoded content and Base64 URL encode it. As of final step, let\\u2019s prepare the Token request with the required inputs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"CLIENT_ID: The OAuth Client Key copied from the saml-bearer-sp\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"CLIENT_SECRET: The OAuth Client Secret copied from the saml-bearer-sp\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ENCODED_SAML_ASSERTION: The SAML Assertion section that is extracted from the SAML Response and Base64 URL encoded\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"curl -u <CLIENT_ID>:<CLIENT_SECRET> \\\\ \\n-X POST https://localhost:8243/token \\\\\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\\\\n--data-urlencode 'grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer' \\\\\\n--data-urlencode 'assertion=<ENCODED_SAML_ASSERTION>' \\\\\\n-k\\n\")), mdx(\"p\", null, \"and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"HIT\"), \"!!! \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"(make sure you hit the request prior to the expiration of the SAML Assertion, else, you will get an error indicating that the assertion is not valid).\")), mdx(\"h2\", {\n    \"id\": \"Voila-\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#Voila-\",\n    \"aria-label\": \"Voila  permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Voila!!! \\uD83C\\uDF89\"), mdx(\"p\", null, \"We have now successfully configured our environments and performed the SAML Bearer Grant and generated an Access Token from the API Manager using the SAML Assertion acquired from the WSO2 Identity Server.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Happy Stacking!!!\"), \" \\uD83D\\uDE03 \\u270C\\uFE0F\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"sheetViews":null},"pageContext":{"slug":"/saml-bearer-grant-with-wso2-api-manager-identity-server/content/","previous":{"id":"0c200a19-2603-597b-859d-8ac8f2936365","fields":{"slug":"/throttling-troubleshooting-guide/content/"},"frontmatter":{"title":"Preview Deck | Troubleshoot Guide"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Preview Deck | Troubleshoot Guide\",\n  \"date\": \"2021-05-18\",\n  \"intro\": \"A Troubleshooting guide for Throttling\",\n  \"short\": \"Sample Reveal Content in StackCheats\",\n  \"tags\": [\"wso2\", \"reveal\", \"sample\"],\n  \"seo\": \"A sample reveal JS content\",\n  \"reveal\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"-Preview-Deck\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#-Preview-Deck\",\n    \"aria-label\": \" Preview Deck permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"\\uD83D\\uDC4B Preview Deck\"), mdx(\"p\", null, \"\\u2014h\\u2014\"), mdx(\"h2\", {\n    \"id\": \"Troubleshoot-Throttling\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#Troubleshoot-Throttling\",\n    \"aria-label\": \"Troubleshoot Throttling permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Troubleshoot Throttling\"), mdx(\"p\", null, \"This reveal deck contains the fundamental steps and instructions to troubleshoot few well-known issues in API Throttling of WSO2 API Manager.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"This deck is drafted based on API Manager v3.2.0, however, this can referenced for v3.1.0, and v3.0.0 versions\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Move across the deck using either arrow key on the keyboard, of by clicking the arrow icons in the bottom-right corner\"))), mdx(\"p\", null, \"Let\\u2019s get started!!!\"), mdx(\"p\", null, \"reveal-note:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Use the arrow keys (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"up\"), \",\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"right\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"down\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"left\"), \") on the keyboard to navigate through the deck\"), mdx(\"br\", null), mdx(\"br\", null), \"Press `o` to show an overview of the deck\", mdx(\"br\", null), mdx(\"br\", null), \"Press `f` for full-screen mode\"), mdx(\"p\", null, \"\\u2014h\\u2014\"), mdx(\"p\", null, \"Are you having any issues while publishing a (custom) policy from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Admin\"), \" portal?\"), mdx(\"p\", null, \"If \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"yes\"), \", go through the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"below\"), \"-given steps to verify the configurations in your environment.\\nIf \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"no\"), \", move to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"right\"), \".\"), mdx(\"p\", null, \"\\u2014v\\u2014\"), mdx(\"p\", null, \"A probable cause for this behavior can be a misconfiguration of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Service URL\"), \" of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Policy Deployer\"), \". Open the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<publisher>/repository/conf/deployment.toml\"), \" and validate the following\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-toml\"\n  }, \"[apim.throttling]\\nservice_url = \\\"https://tm-lb-hostname:9443/services/\\\"\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"service_url\"), \" must point to the Traffic Manager\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"services\"), \" endpoint. This is used to publish and deploy the execution policies in Traffic Manager. If the endpoint is not reachable or misconfigured, there will be errors logged in the Publisher.\")), mdx(\"p\", null, \"\\u2014v\\u2014\"), mdx(\"p\", null, \"Further, if you are using different user credentials (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"username\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"password\"), \") for each node, please perform the following configurations in the Publisher\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"deployment.toml\"), \" to authenticate with the Traffic Manager without any failures.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-toml\"\n  }, \"[apim.throttling.policy_deploy]\\nusername = \\\"traffic-manager-admin-username\\\"\\npassword = \\\"traffic-manager-admin-password\\\"\\n\")), mdx(\"p\", null, \"\\u2014h\\u2014\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"We assume that you don\\u2019t have any issues with creating or publishing (custom) policies from the Admin portal. But, experiencing inconsistent behavior during the runtime.\")), mdx(\"p\", null, \"If you are experiencing errors in the Gateway node during runtime, scroll \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"down\"), \". If not, move to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"right\"), \".\"), mdx(\"p\", null, \"reveal-note:\"), mdx(\"p\", null, \"Advanced Throttling enables an async communication between Gateway and Traffic Manager. During runtime, the Gateway collects and sends events to the Traffic Manager to process decisions.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If the API resource is unsecured, a default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Unauthenticated\"), \" subscription policy will be used to evaluate the subscription level throttling nevertheless the assigned.\")), mdx(\"p\", null, \"\\u2014v\\u2014\"), mdx(\"p\", null, \"Are you seeing any of the following error-traces in the Gateway node?\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"ERROR - DataEndpointConnectionWorker Error while trying to connect to the endpoint. Cannot borrow client for ssl://traffic-manager-host:9711\\norg.wso2.carbon.databridge.agent.exception.DataEndpointAuthenticationException: Cannot borrow client for ssl://traffic-manager-host:9711\\n    ...\\nCaused by: org.wso2.carbon.databridge.agent.exception.DataEndpointException: Error while opening socket to traffic-manager-host:9711. Connection refused (Connection refused)\\n    ...\\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Yes\"), \"? proceed \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"down\"), \".\"), mdx(\"p\", null, \"\\u2014v\\u2014\"), mdx(\"p\", null, \"The mentioned errors are logged due to connectivity issues between Gateway and Traffic Manager. Gateway establishes a Binary transport communication link with Traffic Manager to publish throttle data events.\"), mdx(\"p\", null, \"Check whether all required ports related to Binary communication (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"9711\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"9611\"), \") are opened and not blocked by any firewall. You can use the following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"telnet\"), \" from Gateway instance to check the connectivity between Traffic Manager.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, \"telnet traffic-manager-host 9611\\n\")), mdx(\"p\", null, \"\\u2014h\\u2014\"), mdx(\"h2\", {\n    \"id\": \"Happy-Stacking-\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#Happy-Stacking-\",\n    \"aria-label\": \"Happy Stacking  permalink\",\n    \"className\": \"header-permlink before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Happy Stacking!!! \\uD83D\\uDC4C\\uD83D\\uDC4C\\uD83D\\uDC4C\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"next":null}},"staticQueryHashes":["2632472463"]}