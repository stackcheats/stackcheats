{"data":{"site":{"siteMetadata":{"title":"stackcheats"}},"markdownRemark":{"id":"902fd179-2e0e-5867-b870-390b99ef6a93","excerpt":"Intro We will be creating APIs and subscribing and consuming them using RESTful APIs which are exposed by the  WSO2 API Manager  (2.6) platform. The RESTful…","html":"<h2>Intro</h2>\n<p>We will be creating APIs and subscribing and consuming them using RESTful APIs which are exposed by the <strong>WSO2 API Manager</strong> (2.6) platform.</p>\n<p>The RESTful APIs of API Manager gives an extended platform to the end-users and developers to create APIs, create an application and to subscribe to them using REST clients without touching any UIs of API Manager. This simply makes life easier when creating hundreds of APIs and testing the platform.</p>\n<p>In this demo, we will be covering and performing the following subjects …</p>\n<ul>\n<li>Dynamic Client Registration</li>\n<li>Create REST API</li>\n<li>Create Application</li>\n<li>Subscribe</li>\n<li>Generate Keys and Access Token</li>\n<li>Consume API</li>\n</ul>\n<blockquote>\n<p>You can find more details on exposed APIs and Docs <a href=\"https://docs.wso2.com/display/AM260/RESTful+APIs\">here</a>. We will be using API Docs of API Manager v2.6. Also please find the <strong>Postman collection</strong> used for this demo at the end of this article</p>\n</blockquote>\n<h2>Dynamic Client Registration</h2>\n<p>Before executing any of the REST API, we have to invoke the dynamic client registration endpoint and want to get an <code class=\"language-text\">Access Token</code> to further continue and use the exposed APIs.</p>\n<h3>Server Startup</h3>\n<p>Download and start the WSO2 API Manager by directing to <code class=\"language-text\">&lt;APIM&gt;/bin</code> folder and executing the following</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"># linux env\nsh wso2server.sh\n\n# windows env\nwso2server.bat</code></pre></div>\n<h3>Client Registration</h3>\n<p>After a successful startup, use the following endpoint reference to register a dynamic client</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:9443/client-registration/v0.14/register\n<span class=\"token header-name keyword\">Authorization:</span> Basic &lt;Base64(admin:admin)>\n<span class=\"token header-name keyword\">Content-Type:</span> application/json<span class=\"token application/json\">\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"callbackUrl\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"clientName\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rest_api_demo\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"owner\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"grantType\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"password refresh_token\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"saasApp\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:9443/client-registration/v0.14/register \\\n  -H &#39;Authorization: Basic YWRtaW46YWRtaW4=&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -d &#39;{\n    &quot;callbackUrl&quot;: &quot;localhost&quot;,\n    &quot;clientName&quot;: &quot;rest_api_demo&quot;,\n    &quot;owner&quot;: &quot;admin&quot;,\n    &quot;grantType&quot;: &quot;password refresh_token&quot;,\n    &quot;saasApp&quot;: true\n}&#39;</code></pre></div>\n<p>Markdown the <code class=\"language-text\">clientId</code> and <code class=\"language-text\">clientSecret</code> values from the response to generate an access token using the token endpoint.</p>\n<h3>Token Generation</h3>\n<p>Execute the following endpoint reference to generate an access token using the obtained <code class=\"language-text\">clientId</code> and <code class=\"language-text\">clientSecret</code> values.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:8243/token\n<span class=\"token header-name keyword\">Authorization:</span> Basic &lt;Base64(ClientID:ClientSecret)>\n<span class=\"token header-name keyword\">Content-Type:</span> application/x-www-form-urlencoded\n\ngrant_type=password\nusername=admin\npassword=admin\nscope=apim:api_view apim:api_create apim:api_publish apim:subscribe</code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:8243/token \\\n  -H &#39;Authorization: Basic &lt;Base64(ClientID:ClientSecret)&gt;&#39; \\\n  -H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\n  -d &#39;grant_type=password&amp;username=admin&amp;password=admin&amp;scope=apim%3Aapi_view%20apim%3Aapi_create%20apim%3Aapi_publish%20apim%3Asubscribe&#39;</code></pre></div>\n<p>Now we have successfully generated an access token to use with our Store and Publisher REST APIs. Copy the generated access token from the response and keep it for future executions.</p>\n<h2>Create REST API</h2>\n<p>We will be using the exact request as defined <a href=\"https://docs.wso2.com/display/AM260/apidocs/publisher/#!/operations#APIIndividual#apisPost\">here</a> to create a test API for our demo. Our demo API will be the default shipped <code class=\"language-text\">PizzaShackAPI</code>. Please find the request endpoint reference below</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST https://localhost:9443/api/am/publisher/v0.14/apis Authorization: Bearer &lt;Access Token>  \n{\n  \"name\": \"PizzaShackAPI\",\n  \"description\": \"This document describe a RESTFul API for Pizza Shack online pizza delivery store.\\r\\n\",\n  \"context\": \"/pizzashack\",\n  \"version\": \"1.0.0\",\n  \"provider\": \"admin\",\n  \"apiDefinition\": \"{\\\"paths\\\":{\\\"/order\\\":{\\\"post\\\":{\\\"x-auth-type\\\":\\\"Application &amp; Application User\\\",\\\"x-throttling-tier\\\":\\\"Unlimited\\\",\\\"description\\\":\\\"Create a new Order\\\",\\\"parameters\\\":[{\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/Order\\\"},\\\"description\\\":\\\"Order object that needs to be added\\\",\\\"name\\\":\\\"body\\\",\\\"required\\\":true,\\\"in\\\":\\\"body\\\"}],\\\"responses\\\":{\\\"201\\\":{\\\"headers\\\":{\\\"Location\\\":{\\\"description\\\":\\\"The URL of the newly created resource.\\\",\\\"type\\\":\\\"string\\\"}},\\\"schema\\\":{\\\"$ref\\\":\\\"#/definitions/Order\\\"},\\\"description\\\":\\\"Created.\\\"}}}},\\\"/menu\\\":{\\\"get\\\":{\\\"x-auth-type\\\":\\\"Application &amp; Application User\\\",\\\"x-throttling-tier\\\":\\\"Unlimited\\\",\\\"description\\\":\\\"Return a list of available menu items\\\",\\\"parameters\\\":[],\\\"responses\\\":{\\\"200\\\":{\\\"headers\\\":{},\\\"schema\\\":{\\\"title\\\":\\\"Menu\\\",\\\"properties\\\":{\\\"list\\\":{\\\"items\\\":{\\\"$ref\\\":\\\"#/definitions/MenuItem\\\"},\\\"type\\\":\\\"array\\\"}},\\\"type\\\":\\\"object\\\"},\\\"description\\\":\\\"OK.\\\"}}}}},\\\"schemes\\\":[\\\"https\\\"],\\\"produces\\\":[\\\"application/json\\\"],\\\"swagger\\\":\\\"2.0\\\",\\\"definitions\\\":{\\\"MenuItem\\\":{\\\"title\\\":\\\"Pizza menu Item\\\",\\\"properties\\\":{\\\"price\\\":{\\\"type\\\":\\\"string\\\"},\\\"description\\\":{\\\"type\\\":\\\"string\\\"},\\\"name\\\":{\\\"type\\\":\\\"string\\\"},\\\"image\\\":{\\\"type\\\":\\\"string\\\"}},\\\"required\\\":[\\\"name\\\"]},\\\"Order\\\":{\\\"title\\\":\\\"Pizza Order\\\",\\\"properties\\\":{\\\"customerName\\\":{\\\"type\\\":\\\"string\\\"},\\\"delivered\\\":{\\\"type\\\":\\\"boolean\\\"},\\\"address\\\":{\\\"type\\\":\\\"string\\\"},\\\"pizzaType\\\":{\\\"type\\\":\\\"string\\\"},\\\"creditCardNumber\\\":{\\\"type\\\":\\\"string\\\"},\\\"quantity\\\":{\\\"type\\\":\\\"number\\\"},\\\"orderId\\\":{\\\"type\\\":\\\"string\\\"}},\\\"required\\\":[\\\"orderId\\\"]}},\\\"consumes\\\":[\\\"application/json\\\"],\\\"info\\\":{\\\"title\\\":\\\"PizzaShackAPI\\\",\\\"description\\\":\\\"This document describe a RESTFul API for Pizza Shack online pizza delivery store.\\\\n\\\",\\\"license\\\":{\\\"name\\\":\\\"Apache 2.0\\\",\\\"url\\\":\\\"http://www.apache.org/licenses/LICENSE-2.0.html\\\"},\\\"contact\\\":{\\\"email\\\":\\\"architecture@pizzashack.com\\\",\\\"name\\\":\\\"John Doe\\\",\\\"url\\\":\\\"http://www.pizzashack.com\\\"},\\\"version\\\":\\\"1.0.0\\\"}}\",    \n  \"wsdlUri\": null,\n  \"status\": \"CREATED\",\n  \"responseCaching\": \"Disabled\",\n  \"cacheTimeout\": 300,\n  \"destinationStatsEnabled\": false,\n  \"isDefaultVersion\": false,\n  \"type\": \"HTTP\",\n  \"transport\":[\"http\",\"https\"],\n  \"tags\": [\"pizza\"],\n  \"tiers\": [\"Unlimited\"],\n  \"maxTps\":{\n    \"sandbox\": 5000,\n    \"production\": 1000\n  },\n  \"visibility\": \"PUBLIC\",\n  \"visibleRoles\": [],\n  \"endpointConfig\": \"{\\\"production_endpoints\\\":{\\\"url\\\":\\\"https://localhost:9443/am/sample/pizzashack/v1/api/\\\",\\\"config\\\":null},\\\"sandbox_endpoints\\\":{\\\"url\\\":\\\"https://localhost:9443/am/sample/pizzashack/v1/api/\\\",\\\"config\\\":null},\\\"endpoint_type\\\":\\\"http\\\"}\",\n  \"endpointSecurity\":{\n    \"username\": \"user\",\n    \"type\": \"basic\",\n    \"password\": \"pass\"\n  },\n  \"gatewayEnvironments\": \"Production and Sandbox\",\n  \"sequences\":[\n    {\n      \"name\":\"json_validator\",\n      \"type\": \"in\"\n    },\n    {\n      \"name\":\"log_out_message\",\n      \"type\": \"out\"\n    }\n  ],\n  \"subscriptionAvailability\": null,\n  \"subscriptionAvailableTenants\": [],\n  \"businessInformation\":{\n    \"businessOwnerEmail\": \"marketing@pizzashack.com\",\n    \"technicalOwnerEmail\": \"architecture@pizzashack.com\",\n    \"technicalOwner\": \"John Doe\",\n    \"businessOwner\": \"Jane Roe\"\n  },\n  \"corsConfiguration\":{\n    \"accessControlAllowOrigins\": [\"*\"],\n    \"accessControlAllowHeaders\":[\"authorization\",\"Access-Control-Allow-Origin\",\"Content-Type\",\"SOAPAction\"],\n    \"accessControlAllowMethods\":[\"GET\",\"PUT\",\"POST\",\"DELETE\",\"PATCH\",\"OPTIONS\"],\n    \"accessControlAllowCredentials\": false,\n    \"corsConfigurationEnabled\": false\n  }\n}</code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:9443/api/am/publisher/v0.14/apis \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -d &#39;{\n   &quot;name&quot;: &quot;PizzaShackAPI&quot;,\n   &quot;description&quot;: &quot;This document describe a RESTFul API for Pizza Shack online pizza delivery store.\\r\\n&quot;,\n   &quot;context&quot;: &quot;/pizzashack&quot;,\n   &quot;version&quot;: &quot;1.0.0&quot;,\n   &quot;provider&quot;: &quot;admin&quot;,\n   &quot;apiDefinition&quot;: &quot;{\\&quot;paths\\&quot;:{\\&quot;/order\\&quot;:{\\&quot;post\\&quot;:{\\&quot;x-auth-type\\&quot;:\\&quot;Application &amp; Application User\\&quot;,\\&quot;x-throttling-tier\\&quot;:\\&quot;Unlimited\\&quot;,\\&quot;description\\&quot;:\\&quot;Create a new Order\\&quot;,\\&quot;parameters\\&quot;:[{\\&quot;schema\\&quot;:{\\&quot;$ref\\&quot;:\\&quot;#/definitions/Order\\&quot;},\\&quot;description\\&quot;:\\&quot;Order object that needs to be added\\&quot;,\\&quot;name\\&quot;:\\&quot;body\\&quot;,\\&quot;required\\&quot;:true,\\&quot;in\\&quot;:\\&quot;body\\&quot;}],\\&quot;responses\\&quot;:{\\&quot;201\\&quot;:{\\&quot;headers\\&quot;:{\\&quot;Location\\&quot;:{\\&quot;description\\&quot;:\\&quot;The URL of the newly created resource.\\&quot;,\\&quot;type\\&quot;:\\&quot;string\\&quot;}},\\&quot;schema\\&quot;:{\\&quot;$ref\\&quot;:\\&quot;#/definitions/Order\\&quot;},\\&quot;description\\&quot;:\\&quot;Created.\\&quot;}}}},\\&quot;/menu\\&quot;:{\\&quot;get\\&quot;:{\\&quot;x-auth-type\\&quot;:\\&quot;Application &amp; Application User\\&quot;,\\&quot;x-throttling-tier\\&quot;:\\&quot;Unlimited\\&quot;,\\&quot;description\\&quot;:\\&quot;Return a list of available menu items\\&quot;,\\&quot;parameters\\&quot;:[],\\&quot;responses\\&quot;:{\\&quot;200\\&quot;:{\\&quot;headers\\&quot;:{},\\&quot;schema\\&quot;:{\\&quot;title\\&quot;:\\&quot;Menu\\&quot;,\\&quot;properties\\&quot;:{\\&quot;list\\&quot;:{\\&quot;items\\&quot;:{\\&quot;$ref\\&quot;:\\&quot;#/definitions/MenuItem\\&quot;},\\&quot;type\\&quot;:\\&quot;array\\&quot;}},\\&quot;type\\&quot;:\\&quot;object\\&quot;},\\&quot;description\\&quot;:\\&quot;OK.\\&quot;}}}}},\\&quot;schemes\\&quot;:[\\&quot;https\\&quot;],\\&quot;produces\\&quot;:[\\&quot;application/json\\&quot;],\\&quot;swagger\\&quot;:\\&quot;2.0\\&quot;,\\&quot;definitions\\&quot;:{\\&quot;MenuItem\\&quot;:{\\&quot;title\\&quot;:\\&quot;Pizza menu Item\\&quot;,\\&quot;properties\\&quot;:{\\&quot;price\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;description\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;name\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;image\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;}},\\&quot;required\\&quot;:[\\&quot;name\\&quot;]},\\&quot;Order\\&quot;:{\\&quot;title\\&quot;:\\&quot;Pizza Order\\&quot;,\\&quot;properties\\&quot;:{\\&quot;customerName\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;delivered\\&quot;:{\\&quot;type\\&quot;:\\&quot;boolean\\&quot;},\\&quot;address\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;pizzaType\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;creditCardNumber\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;},\\&quot;quantity\\&quot;:{\\&quot;type\\&quot;:\\&quot;number\\&quot;},\\&quot;orderId\\&quot;:{\\&quot;type\\&quot;:\\&quot;string\\&quot;}},\\&quot;required\\&quot;:[\\&quot;orderId\\&quot;]}},\\&quot;consumes\\&quot;:[\\&quot;application/json\\&quot;],\\&quot;info\\&quot;:{\\&quot;title\\&quot;:\\&quot;PizzaShackAPI\\&quot;,\\&quot;description\\&quot;:\\&quot;This document describe a RESTFul API for Pizza Shack online pizza delivery store.\\\\n\\&quot;,\\&quot;license\\&quot;:{\\&quot;name\\&quot;:\\&quot;Apache 2.0\\&quot;,\\&quot;url\\&quot;:\\&quot;http://www.apache.org/licenses/LICENSE-2.0.html\\&quot;},\\&quot;contact\\&quot;:{\\&quot;email\\&quot;:\\&quot;architecture@pizzashack.com\\&quot;,\\&quot;name\\&quot;:\\&quot;John Doe\\&quot;,\\&quot;url\\&quot;:\\&quot;http://www.pizzashack.com\\&quot;},\\&quot;version\\&quot;:\\&quot;1.0.0\\&quot;}}&quot;,\n   &quot;wsdlUri&quot;: null,\n   &quot;status&quot;: &quot;CREATED&quot;,\n   &quot;responseCaching&quot;: &quot;Disabled&quot;,\n   &quot;cacheTimeout&quot;: 300,\n   &quot;destinationStatsEnabled&quot;: false,\n   &quot;isDefaultVersion&quot;: false,\n   &quot;type&quot;: &quot;HTTP&quot;,\n   &quot;transport&quot;:    [\n      &quot;http&quot;,\n      &quot;https&quot;\n   ],\n   &quot;tags&quot;: [&quot;pizza&quot;],\n   &quot;tiers&quot;: [&quot;Unlimited&quot;],\n   &quot;maxTps&quot;:    {\n      &quot;sandbox&quot;: 5000,\n      &quot;production&quot;: 1000\n   },\n   &quot;visibility&quot;: &quot;PUBLIC&quot;,\n   &quot;visibleRoles&quot;: [],\n   &quot;endpointConfig&quot;: &quot;{\\&quot;production_endpoints\\&quot;:{\\&quot;url\\&quot;:\\&quot;https://localhost:9443/am/sample/pizzashack/v1/api/\\&quot;,\\&quot;config\\&quot;:null},\\&quot;sandbox_endpoints\\&quot;:{\\&quot;url\\&quot;:\\&quot;https://localhost:9443/am/sample/pizzashack/v1/api/\\&quot;,\\&quot;config\\&quot;:null},\\&quot;endpoint_type\\&quot;:\\&quot;http\\&quot;}&quot;,\n   &quot;endpointSecurity&quot;:    {\n      &quot;username&quot;: &quot;user&quot;,\n      &quot;type&quot;: &quot;basic&quot;,\n      &quot;password&quot;: &quot;pass&quot;\n   },\n   &quot;gatewayEnvironments&quot;: &quot;Production and Sandbox&quot;,\n   &quot;sequences&quot;: [{&quot;name&quot;:&quot;json_validator&quot;,&quot;type&quot;: &quot;in&quot;},{&quot;name&quot;:&quot;log_out_message&quot;,&quot;type&quot;: &quot;out&quot;}],\n   &quot;subscriptionAvailability&quot;: null,\n   &quot;subscriptionAvailableTenants&quot;: [],\n   &quot;businessInformation&quot;:    {\n      &quot;businessOwnerEmail&quot;: &quot;marketing@pizzashack.com&quot;,\n      &quot;technicalOwnerEmail&quot;: &quot;architecture@pizzashack.com&quot;,\n      &quot;technicalOwner&quot;: &quot;John Doe&quot;,\n      &quot;businessOwner&quot;: &quot;Jane Roe&quot;\n   },\n   &quot;corsConfiguration&quot;:    {\n      &quot;accessControlAllowOrigins&quot;: [&quot;*&quot;],\n      &quot;accessControlAllowHeaders&quot;:       [\n         &quot;authorization&quot;,\n         &quot;Access-Control-Allow-Origin&quot;,\n         &quot;Content-Type&quot;,\n         &quot;SOAPAction&quot;\n      ],\n      &quot;accessControlAllowMethods&quot;:       [\n         &quot;GET&quot;,\n         &quot;PUT&quot;,\n         &quot;POST&quot;,\n         &quot;DELETE&quot;,\n         &quot;PATCH&quot;,\n         &quot;OPTIONS&quot;\n      ],\n      &quot;accessControlAllowCredentials&quot;: false,\n      &quot;corsConfigurationEnabled&quot;: false\n   }\n}&#39;</code></pre></div>\n<p>After successful execution, copy the <code class=\"language-text\">id</code> value from the response. We will be using the <code class=\"language-text\">id</code> value to identify our Pizza Shack API when subscribing to an application.</p>\n<p>Now we have to change the status of our created API from <code class=\"language-text\">CREATED</code> to <code class=\"language-text\">PUBLISHED</code> state.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:9443/api/am/publisher/v0.14/apis/change-lifecycle?apiId=&lt;API Id Value>&amp;action=Publish\n<span class=\"token header-name keyword\">Authorization:</span> Bearer &lt;Access Token></code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  &#39;https://localhost:9443/api/am/publisher/v0.14/apis/change-lifecycle?apiId=&lt;API ID&gt;&amp;action=Publish&#39; \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\</code></pre></div>\n<h2>Create Application</h2>\n<p>Before subscribing an API, we have to create an application for it with the appropriate throttling tiers/subscription level.</p>\n<blockquote>\n<p>We can also use the DefaultApplication from the Store to subscribe to an API, but for the demo, we will be creating a new application</p>\n</blockquote>\n<p>Below presented is the request endpoint reference to create a new application.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:9443/api/am/store/v0.14/applications\n<span class=\"token header-name keyword\">Authorization:</span> Bearer &lt;Access Token>\n<span class=\"token header-name keyword\">Content-Type:</span> application/json<span class=\"token application/json\">\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"throttlingTier\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Unlimited\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Demo App\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"DemoApp\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"callbackUrl\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://localhost\"</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:9443/api/am/store/v0.14/applications \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -d &#39;{\n    &quot;throttlingTier&quot;: &quot;Unlimited&quot;,\n    &quot;description&quot;: &quot;Demo App&quot;,\n    &quot;name&quot;: &quot;DemoApp&quot;,\n    &quot;callbackUrl&quot;: &quot;http://localhost&quot;\n}&#39;</code></pre></div>\n<p>Note down the <code class=\"language-text\">applicationId</code> value from the successful response.</p>\n<h2>Subscribe</h2>\n<p>At last, now we are in the section of subscribing to our created <code class=\"language-text\">PizzaShackAPI</code> with the above-generated <code class=\"language-text\">DemoApp</code>.</p>\n<p>For subscription, we can use either the <code class=\"language-text\">id</code> value of our created API or the unique name of our <code class=\"language-text\">PizzaShackAPI</code>. Using the <code class=\"language-text\">id</code> value of an API is a straightforward execution. But sometimes, using the unique name will be more helpful when you know the minimal of an API.</p>\n<ul>\n<li>If a user called <code class=\"language-text\">admin</code> has created an API named <code class=\"language-text\">DemoAPI</code> with version <code class=\"language-text\">v1.0.0</code> then the unique name will be as <code class=\"language-text\">admin-DemoAPI-v1.0.0</code></li>\n<li>If a user called <code class=\"language-text\">foo</code> from a tenant named <code class=\"language-text\">bar</code> has created an API named <code class=\"language-text\">TenantAPI</code> with the version <code class=\"language-text\">1.0</code> then the unique name will be as <code class=\"language-text\">foo-AT-bar.com-TenantAPI-1.0</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:9443/api/am/store/v0.14/subscriptions\n<span class=\"token header-name keyword\">Authorization:</span> Bearer &lt;Access Token>\n\n{\n  \"tier\": \"Unlimited\",\n  \"apiIdentifier\": \"&lt;API ID Value || API Unique Name>\",\n  \"applicationId\": \"&lt;Application ID Value>\"\n}</code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:9443/api/am/store/v0.14/subscriptions \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -d &#39;{\n  &quot;tier&quot;: &quot;Unlimited&quot;,\n  &quot;apiIdentifier&quot;: &quot;admin-PizzaShackAPI-1.0.0&quot;,\n  &quot;applicationId&quot;: &quot;Application ID&quot;\n}&#39;</code></pre></div>\n<h2>Generate Keys</h2>\n<p>Next, we will be generating Production Keys for our <code class=\"language-text\">DemoApp</code> to generate an access token for API consumption.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:9443/api/am/store/v0.14/applications/generate-keys?applicationId=&lt;Application ID Value>\n<span class=\"token header-name keyword\">Authorization:</span> Bearer &lt;Access Token>\n\n{\n  \"validityTime\": \"3600\",\n  \"keyType\": \"PRODUCTION\",\n  \"accessAllowDomains\": [ \"ALL\" ],\n  \"scopes\": [ \"am_application_scope\", \"default\" ],\n  \"supportedGrantTypes\": [ \"urn:ietf:params:oauth:grant-type:saml2-bearer\", \"iwa:ntlm\", \"refresh_token\", \"client_credentials\", \"password\" ]\n}</code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  &#39;https://localhost:9443/api/am/store/v0.14/applications/generate-keys?applicationId=&lt;Application ID&gt;&#39; \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\\n  -H &#39;Content-Type: application/json&#39; \\\n  -d &#39;{\n  &quot;validityTime&quot;: &quot;3600&quot;,\n  &quot;keyType&quot;: &quot;PRODUCTION&quot;,\n  &quot;accessAllowDomains&quot;: [ &quot;ALL&quot; ],\n  &quot;scopes&quot;: [ &quot;am_application_scope&quot;, &quot;default&quot; ],\n  &quot;supportedGrantTypes&quot;: [ &quot;urn:ietf:params:oauth:grant-type:saml2-bearer&quot;, &quot;iwa:ntlm&quot;, &quot;refresh_token&quot;, &quot;client_credentials&quot;, &quot;password&quot; ]\n}&#39;</code></pre></div>\n<p>Note down both the <code class=\"language-text\">consumerKey</code> and <code class=\"language-text\">consumerSecret</code> values to generate an Access Token.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">POST:</span> https://localhost:8243/token\n<span class=\"token header-name keyword\">Authorization:</span> Basic &lt;Base64(ConsumerKey:ConsumerSecret)>\n<span class=\"token header-name keyword\">Content-Type:</span> application/x-www-form-urlencoded\n\ngrant_type=password\nusername=admin\npassword=admin\nscope=default</code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X POST \\\n  https://localhost:8243/token \\\n  -H &#39;Authorization: Basic &lt;Base64(ConsumerKey:ConsumerSecret)&gt;&#39; \\\n  -H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\n  -d &#39;grant_type=password&amp;username=admin&amp;password=admin&amp;scope=default&#39;</code></pre></div>\n<p>Note the <code class=\"language-text\">access_token</code> value to invoke and consumer our Pizza Shack API</p>\n<h2>Consume &#x26; Test</h2>\n<p>At last, now we are going to invoke and consume our created Pizza Shack API using the below request endpoint reference with the above-generated access token.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header-name keyword\">GET:</span> https://localhost:8243/pizzashack/1.0.0/menu\n<span class=\"token header-name keyword\">Authorization:</span> Beaer &lt;Access Token></code></pre></div>\n<p>curl command</p>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl -X GET \\\n  https://localhost:8243/pizzashack/1.0.0/menu \\\n  -H &#39;Authorization: Bearer &lt;Access Token&gt;&#39; \\</code></pre></div>\n<p>After all these struggles, We have successfully created an API, application and subscribed and invoked them and achieved our goals.</p>\n<p>I know it is hard to manage and remember these curl commands and you need a way to organize them. Therefore, please find the <strong>Postman REST API collection</strong> of this demo to make life easier.</p>\n<h2>Postman Collection</h2>\n<br>\n<a class=\"ul-disabled\" href=\"https://drive.google.com/file/d/1Ug7eQJugVFu0x4tFnbc4-X_60oJmXXzs/view?usp=sharing&source=post_page-----54e94cd6c2ea----------------------\">\n    <div class=\"card\">\n        <div class=\"card-horizontal\">\n            <div class=\"card-body py-4 px-5\">\n                <h4 class=\"card-title mt-4\">Subscribe-API-Using-Store-REST-APIs.postman_collection.json</h4>\n                <p>Postman Collection</p>\n                <footer class=\"blockquote-footer\">\n                    <small class=\"text-muted\">\n                        athiththan11\n                    </small>\n                </footer>\n            </div>\n        </div>\n    </div>\n</a>\n<hr class=\"three--dots\"/>","frontmatter":{"title":"Subscribe APIs Using Store REST APIs","intro":"WSO2 API Manager : Publisher & Store REST APIs","tags":["wso2","wso2-api-manager","store","publisher","rest"],"author":"Athiththan"}}},"pageContext":{"slug":"/Subscribe-APIs-Using-Store-REST-APIs/","node_id":"902fd179-2e0e-5867-b870-390b99ef6a93","nodePath":"/Subscribe-APIs-Using-Store-REST-APIs/","nodeType":"sheet","title":"Subscribe APIs Using Store REST APIs","category":"WSO2","weight":-1,"updated":"2019-09-29T00:00:00.000Z","author":"Athiththan","short":"A Quick Guide on using WSO2 API Manager's Publisher & Store REST APIs to Create and Subscribe","tags":["wso2","wso2-api-manager","store","publisher","rest"]}}