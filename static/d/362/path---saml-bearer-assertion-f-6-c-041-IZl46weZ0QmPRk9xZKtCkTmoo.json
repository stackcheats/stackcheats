{"data":{"site":{"siteMetadata":{"title":"stackcheats"}},"markdownRemark":{"id":"c060bb20-f2a5-5316-be4f-ffc934a5a047","excerpt":"Brief Introduction SAML 2.0 SAML2 or SAML 2.0 is an XML-based framework, which is used to describe and exchange security information. SAML is commonly used for…","html":"<h2>Brief Introduction</h2>\n<h3>SAML 2.0</h3>\n<p>SAML2 or SAML 2.0 is an XML-based framework, which is used to describe and exchange security information. SAML is commonly used for Single Sign-On (SSO) and Identity Management and Federation.</p>\n<h3>OAuth 2.0</h3>\n<p>OAuth2 is an authorization framework used to enable applications to obtain limited access to resource owner (user) accounts.</p>\n<blockquote>\n<p>A quick glance and a story guide on OAuth2 framework and its grant-flows can be found here.</p>\n</blockquote>\n<p>Both OAuth2 and SAML have similar concepts and terms in between them.</p>\n<ul>\n<li>Resource Server = Service Provider</li>\n<li>Authorization Server = Identity Provider</li>\n<li>Client</li>\n</ul>\n<h2>Story Guide</h2>\n<p>Stackcheats is a private blog platform which uses <strong>SAML SSO</strong> to authenticate and authorize different writers and bloggers. Since Stackcheats has been a private blog platform, they have a new requirement on their development road-map to access writer’s technical blogs from their  Medium accounts.</p>\n<p>However, the Medium platform has been using <strong>OAuth2</strong> mechanism to authorize different users and writers to access and view various medium posts.</p>\n<blockquote>\n<p>OAuth2 and SAML 2.0 are two different frameworks used to authorize and authenticate (OAuth doesn’t authenticate).</p>\n</blockquote>\n<p>This is where the SAML Bearer Assertion grant comes to play. The SAML Bearer Assertion grant is used to exchange the acquired SAML Assertion for an OAuth2 access token.</p>\n<p>To simply put, SAML Bearer Assertion grant-flow is very similar to the Authorization code grant-flow in OAuth, wherein SAML Bearer Assertion flow, a SAML Assertion is used instead of a cryptography code to gain an OAuth2 access token.</p>\n<p>Given below is a simple diagram of how SAML Bearer Assertion flow works.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-75e99.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.59252379846761%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAFxGAABcRgEUlENBAAAC3klEQVQ4y43R30tTURwA8ONaWqmUPejEbSpss22kyWRkjqB62Jzuh67pfrtGoYXURHqw2MasUCdEEPXSH1BIjikVUtAonGCKkDFpbmULNqcZxuZ0TuN0znE+FEJe+PI9937P/dzv9x4A/rnWPyioOCcnFV1wvhmmpxtT8JMcbk7LQ4ExQw6uJSabwL6v1FQjAbdn5DY42wA/Dok2Im/OYzj2w6fNxbX0jBKw2WygVCr/D25Myag7sNwOv6vg5pQUwjkZ6lC2AgOWw7g2/0Kate8Ol96ryOaoV8WJTzZfjryVXYl6FdeiXmXT2brqg/kFTMru3qrPbsBZ8FDYCyMkKr56KHuiT1yavQo5ZeXlxXw+7xC+4Q12792R2+0GPp+PrCsrK4FWoybYJbOxxtymv2fQtTrbjLpes0nf6bDbSE141UCmqAmO5nG/jYq4y69FJ2JjIt4Xz2kAIfzrA06nk7yk1+vvtLe3Q6PRCC0WC9TpdOvoGTmUcxASkBNytzJjr2DJ3NNN+vzQFmPxZZogNBoNIxTUYX5tbe2xDHjLZDJBjUazrtVqMRhBNRqDwSgoOyOgHweAyp591lGafAdLQsOQHh6BzIQXAr/frwsEAgMYEQgEhUKhkIHXCLGbzWaI8hrCIPpARCwWF7JYLDavuorLBTnFFbHnHOYv911m0uNkrnl6mavDDhAOhx8Hg8EQRtD4WVarNRuvUWe9GETYEkJ/oxxD4+fhmqK5+wDO5o54Qat1rVFlTTRdtCaUmhtJCRgfH78wMTGhz4CUlpYWambk2xhE8BbuEMWiWq0mYOfCzj+s74sYGx5CKBmMr4pd8bTk/jY5kGIUzN3DQd0QEAH2DJjKgMsikagI/cMifnUdC205Irb5O2SPEDiQSElcSSh9gBCXy0Wx2WxkBIfDAQwGAwFR7sqMnEJriCLY09OTTafTj/JPnmLRAchVDkRLG/pXuuv7ft7EIe1fuf4HwvVJTvH8z8gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"SAML2 Bearer Assertion Flow\"\n        title=\"\"\n        src=\"/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-fb8a0.png\"\n        srcset=\"/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-1a291.png 148w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-2bc4a.png 295w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-fb8a0.png 590w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-526de.png 885w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-fa2eb.png 1180w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-08f6a.png 1770w,\n/static/saml2-bearer-assertion-911573483b590388d8ceb9bec5468a6c-75e99.png 4307w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>Experiential</h2>\n<p>For practical, we will be using <strong>WSO2 API Manager</strong> along with <strong>WSO2 Identity Server</strong> and a simple Passport-SAML express application to retrieve a SAML2 Bearer Assertion and to exchange to an OAuth2 access token and finally to invoke an API defined in the API Manager.</p>\n<p>As first step, we’ll configure our WSO2 Identity Server with the API Manager to function as a Federated Identity Provider. Then, we’ll setup our Passport SAML application with the Identity Server as a service provider to gain SAML2 Token.</p>\n<h3>WSO2 API Manager</h3>\n<p>Follow the steps to add our WSO2 Identity Server as a Federated Identity Provider in our API Manager.</p>\n<p>Start the API Manager server by directing to <code class=\"language-text\">&lt;APIM&gt;/bin</code> folder and execute the startup command based on your environment …</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"># linux env\n./wso2server.sh\n\n# windows env\n./wso2server.bat</code></pre></div>\n<p>And login to the management console (<code class=\"language-text\">https://localhost:9443/carbon</code>), using <code class=\"language-text\">admin</code> for both the username and password.</p>\n<p>Click on <code class=\"language-text\">Add</code> under <code class=\"language-text\">Identity Providers</code> accordian as following</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-d1072.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.81642512077295%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABLUlEQVQoz3WRW0/CQBSE+/9/lolPvqkU2wp0aSlbStn7pRccD1XjC2zyZV42kzMzCeMc27IG23OU7AghA4ydIFWA8wEtP6PINhC9XtDKwdkIZ+6THP0RaVNC6whrPXwYEeIM64bFsD9LlNsKFWuwI+07CUt/jfJ3SUbToD0d4CYsb5y+EIcrmY1kHsB5iyzPsCtLVHUNpTWhHpL4eoNNmiMtKrpgD3ExsGaAku4nctuhyD/R9wIxDPA+IpA+ImnXz/h4eYJevUOnr7DZGr7IYNI36sRQZIWacXRcwOmBYkUo4R+SaEFROIMLV8zThDGOdAnFpT6d9+gvAlV1G62i0Rjq+kB9G2hjiT/9J5k7WpZ6asTt5InMZtKZVv6NfDohz3NIKRcDQwTqNsR4l28XexPrEFp2CAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Add Identity Provider\"\n        title=\"\"\n        src=\"/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-fb8a0.png\"\n        srcset=\"/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-1a291.png 148w,\n/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-2bc4a.png 295w,\n/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-fb8a0.png 590w,\n/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-526de.png 885w,\n/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-fa2eb.png 1180w,\n/static/add-identity-provider-0f07e9988ae6bd8966a13c88722643ec-d1072.png 1242w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-bb851.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.816901408450704%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABN0lEQVQoz51Si07DMBDL/38WIAG/ABPqY1vbtb2kTZq+0ppctsEQoA0iWadLIp/tRBz2FaqcQLWG7iZoM6L1CFUzhov6G0bIpkdRW4gkjkFVDd1qEEmQlFCqgVQKWmsYY26GtQPEPM84r6oqkecFpFRo/QDnHP6ynFuZcArNuq5BEXky1TTexichn12Dv4XZLRBd16HveyyLQ29NsMqWGTxgmqabSD8Udp3BOI5hg3OQJ4XGHAedI7mZsG3boGSeHfJSId3uQ892edCyLF9yumr54qpXR8j8oxTFISi11mIYhmCbya89Es8WURQhyzI0XikRoa6P4C/EpNJ/o/CdTv053+/gqDTE3f0DHp+e8fK6QZykn4hTRHES6iV470dEMba7DGKzeUOS7nx2O5RljbL6DyhUogbvuIxP5KtSgQsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Add new Identity Provider\"\n        title=\"\"\n        src=\"/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-fb8a0.png\"\n        srcset=\"/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-1a291.png 148w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-2bc4a.png 295w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-fb8a0.png 590w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-526de.png 885w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-fa2eb.png 1180w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-08f6a.png 1770w,\n/static/add-new-identity-provider-4b6fdecad06acead44184d7298bbb2ea-bb851.png 2840w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3>WSO2 Identity Server</h3>","frontmatter":{"title":"SAML Bearer Assertion","intro":"Quick Guide: SAML Bearer Assertion for OAuth 2.0","tags":["saml-bearer-assertion","saml","oauth2","wso2"],"author":"Athiththan"}}},"pageContext":{"slug":"/SAML-Bearer-Assertion/","node_id":"c060bb20-f2a5-5316-be4f-ffc934a5a047","nodePath":"/SAML-Bearer-Assertion/","nodeType":"sheet","title":"SAML Bearer Assertion","category":"WSO2","weight":-1,"updated":"2019-08-11T00:00:00.000Z","author":"Athiththan","short":"A Quick Guide on SAML Bearer Assertion using WSO2 Products","tags":["saml-bearer-assertion","saml","oauth2","wso2"]}}