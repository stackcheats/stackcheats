{"data":{"site":{"siteMetadata":{"title":"stackcheats"}},"markdownRemark":{"id":"afc8773d-7a42-5948-a1ae-a3ec17010079","excerpt":"Brief Introduction SAML 2.0 SAML2 or SAML 2.0 is an XML-based framework, which is used to describe and exchange security information. SAML is commonly used for…","html":"<h2>Brief Introduction</h2>\n<h3>SAML 2.0</h3>\n<p>SAML2 or SAML 2.0 is an XML-based framework, which is used to describe and exchange security information. SAML is commonly used for Single Sign-On (SSO) and Identity Management and Federation.</p>\n<h3>OAuth 2.0</h3>\n<p>OAuth2 is an authorization framework used to enable applications to obtain limited access to resource owner (user) accounts.</p>\n<blockquote>\n<p>A quick glance and a story guide on OAuth2 framework and its grant-flows can be found here.</p>\n</blockquote>\n<p>Both OAuth2 and SAML have similar concepts and terms in between them.</p>\n<ul>\n<li>Resource Server = Service Provider</li>\n<li>Authorization Server = Identity Provider</li>\n<li>Client</li>\n</ul>\n<h2>Story Guide</h2>\n<p>Stackcheats is a private blog platform which uses <strong>SAML SSO</strong> to authenticate and authorize different writers and bloggers. Since Stackcheats has been a private blog platform, they have a new requirement on their development road-map to access writer’s technical blogs from their  Medium accounts.</p>\n<p>However, the Medium platform has been using <strong>OAuth2</strong> mechanism to authorize different users and writers to access and view various medium posts.</p>\n<blockquote>\n<p>OAuth2 and SAML 2.0 are two different frameworks used to authorize and authenticate (OAuth doesn’t authenticate).</p>\n</blockquote>\n<p>This is where the SAML Bearer Assertion grant comes to play. The SAML Bearer Assertion grant is used to exchange the acquired SAML Assertion for an OAuth2 access token.</p>\n<p>To simply put, SAML Bearer Assertion grant-flow is very similar to the Authorization code grant-flow in OAuth, wherein SAML Bearer Assertion flow, a SAML Assertion is used instead of a cryptography code to gain an OAuth2 access token.</p>\n<p>Given below is a simple diagram of how SAML Bearer Assertion flow works.</p>\n<p><img src=\"assets/saml-bearer-assertion/saml2-bearer-assertion.png\" alt=\"SAML2 Bearer Assertion Flow\"></p>\n<h2>Experiential</h2>\n<p>For practical, we will be using <strong>WSO2 API Manager</strong> along with <strong>WSO2 Identity Server</strong> and a simple Passport-SAML express application to retrieve a SAML2 Bearer Assertion and to exchange to an OAuth2 access token and finally to invoke an API defined in the API Manager.</p>\n<p>As first step, we’ll configure our WSO2 Identity Server with the API Manager to function as a Federated Identity Provider. Then, we’ll setup our Passport SAML application with the Identity Server as a service provider to gain SAML2 Token.</p>\n<h3>WSO2 API Manager</h3>\n<p>Follow the steps to add our WSO2 Identity Server as a Federated Identity Provider in our API Manager.</p>\n<p>Start the API Manager server by directing to <code class=\"language-text\">&lt;APIM&gt;/bin</code> folder and execute the startup command based on your environment …</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"># linux env\n./wso2server.sh\n\n# windows env\n./wso2server.bat</code></pre></div>\n<p>And login to the management console (<code class=\"language-text\">https://localhost:9443/carbon</code>), using <code class=\"language-text\">admin</code> for both the username and password.</p>\n<p>Click on <code class=\"language-text\">Add</code> under <code class=\"language-text\">Identity Providers</code> accordian as following</p>\n<p><img src=\"assets/saml-bearer-assertion/add-identity-provider.png\" alt=\"Add Identity Provider\"></p>\n<p><img src=\"assets/saml-bearer-assertion/add-new-identity-provider.png\" alt=\"Add new Identity Provider\"></p>\n<h3>WSO2 Identity Server</h3>","frontmatter":{"title":"SAML Bearer Assertion","intro":"Quick Guide: SAML Bearer Assertion for OAuth 2.0","tags":["saml-bearer-assertion","saml","oauth2","wso2"],"author":"Athiththan"}}},"pageContext":{"slug":"/SAML-Bearer-Assertion/","node_id":"afc8773d-7a42-5948-a1ae-a3ec17010079","nodePath":"/SAML-Bearer-Assertion/","nodeType":"sheet","title":"SAML Bearer Assertion","category":"WSO2","weight":-1,"updated":"2019-08-11T00:00:00.000Z","author":"Athiththan","short":"A Quick Guide on SAML Bearer Assertion using WSO2 Products","tags":["saml-bearer-assertion","saml","oauth2","wso2"]}}