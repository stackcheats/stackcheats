{"data":{"site":{"siteMetadata":{"title":"stackcheats"}},"markdownRemark":{"id":"346a4c97-41be-54bc-a837-d58aab82a714","excerpt":"This post illustrates how to add an LDAP user-store as a secondary user-store in WSO2 API Manager (in almost every WSO2 Product). For demo purposes, we will be…","html":"<p>This post illustrates how to add an LDAP user-store as a secondary user-store in WSO2 API Manager (in almost every WSO2 Product).</p>\n<blockquote>\n<p>For demo purposes, we will be using a pre-configured LDAP user-store which resides in <strong>WSO2 Identity Server</strong> and shipped by default</p>\n</blockquote>\n<h2>Configure</h2>\n<p>Download both <a href=\"https://wso2.com/api-management/\">WSO2 API Manager (2.6.0)</a> and <a href=\"https://wso2.com/identity-and-access-management/\">WSO2 Identity Server (5.7.0)</a> as binary artifacts from the official download page and follow the given steps to configure port offset on them.</p>\n<h3>WSO2 Identity Server</h3>\n<p>Extract the binary artifact of WSO2 Identity Server and navigate to <code class=\"language-text\">[IS]/bin</code> folder and execute the following command based on your environment to start the server …</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"># linux env\n./wso2server.sh\n\n# windows env\n./wso2server.bat</code></pre></div>\n<h3>WSO2 API Manager</h3>\n<p>Extract the binary artifact of WSO2 API Manager and navigate to [APIM]/repository/conf/carbon.xml to edit the port offset configurations of API Manager.</p>\n<blockquote>\n<p>We will be using the default shipped LDAP user-store of WSO2 Identity Server as the secondary user-store in API Manager. Therefore, we will be running both the server nodes in a single machine. For this reason, we will be port off-setting the API Manager node</p>\n</blockquote>\n<p>Open and edit the <code class=\"language-text\">&lt;Offset&gt;</code> element with the following …</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Offset</span><span class=\"token punctuation\">></span></span>1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Offset</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Start the server by executing the following command based on your environment</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"># linux env\n./wso2server.sh\n\n# windows env\n./wso2server.bat</code></pre></div>\n<p>And login to the management console by directing to <a href=\"https://localhost:9444/carbon\"><code class=\"language-text\">https://localhost:9444/carbon</code></a> and enter <code class=\"language-text\">admin</code> as both the username and password. Next select <code class=\"language-text\">Add</code> under <code class=\"language-text\">User Stores</code> section in <code class=\"language-text\">Main</code> tab.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-db317.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.99357945425361%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABsElEQVQoz22RT2/TMBiH8+mROPAhuG1Sue2E4AASJ0o60nZp065NnDixnfh/bMdJSvE2DhNgPX70/nx4Zb+OJM7rQ7zZ3q3ub74v34PiqOXEaiaJVNJ0tEUtZFwx6oT0Sk+vieJvnz7f3XxYvFss3t7evvn65WP6kG+XPx/iJFuvNslylcRJkiY/9uv1cZueXhPd7/KiahCidc0CECIAQJEXJYSwAtXTrsoKAvDssipA+UI4iWDVKmEm/2twszOjMzPtpJS9wEJ2OlhRrVjfCxvs/WWar+N0DfbjNdqnx336mGXFbncmSLZEY8wx7g7bY34sHnenbJNl630oDuusBE2DOcK8wUwoFzFLTrjq7eycH/w8+ItxXsgeEdZSSTpRYxrcoA63HNakrgnCNERjx0joNkdhuMaPs/OzHS6qH9wwdh2tILTWGmP63vxZIVr7kqRSUZnGu1UMNqkApSqhKmuW50b3bccIab0fw43+i7Eu0uycn1PP1cT5QNlAucYo9CeYHvbnqkRSWMnNvwimowbj7AS4sMbNvZ3C44V21nnORPicpkYYET+Mo5/+wrnhNw5wIr1CS/enAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Add User Store in WSO2 API Manager (2.6.0)\"\n        title=\"\"\n        src=\"/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-fb8a0.png\"\n        srcset=\"/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-1a291.png 148w,\n/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-2bc4a.png 295w,\n/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-fb8a0.png 590w,\n/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-526de.png 885w,\n/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-fa2eb.png 1180w,\n/static/add-user-store-api-manager-7273440cac348f0e21705d2dc95241ae-db317.png 1246w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Enter the inputs as follows …</p>\n<ul>\n<li>User Store Manager Class: select <code class=\"language-text\">ReadWriteLDAPUserStoreManager</code> or <code class=\"language-text\">ReadOnlyLDAPUserStoreManager</code> based on your preference</li>\n<li>Domain Name: give a related domain name to identify the users from this user-store. We will be using <code class=\"language-text\">IS</code> as the domain name</li>\n<li>Connection URL: <code class=\"language-text\">ldap://localhost:10389</code></li>\n<li>Connection Name: <code class=\"language-text\">uid=admin,ou=system</code></li>\n<li>Connection Password: <code class=\"language-text\">admin</code></li>\n<li>User Search Based: <code class=\"language-text\">ou=Users,dc=wso2,dc=org</code></li>\n<li>User Entry Object Class: <code class=\"language-text\">identityPerson</code></li>\n<li>Username Attribute: <code class=\"language-text\">uid</code></li>\n<li>User Search Filter: <code class=\"language-text\">(&amp;(objectClass=person)(uid=?))</code></li>\n<li>User List Filter: <code class=\"language-text\">(objectClass=person)</code></li>\n</ul>\n<blockquote>\n<p>Please enter relavant configuration values and properties if your LDAP configurations are different from the above-mentioned</p>\n</blockquote>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-bb851.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 44.43661971830986%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABDElEQVQoz3WQ246EIBBE+f9fNOPE8S7IXQQkuiW6O/viSUka6C6bJmPP6qrFamywS1zc9idscfgkJhwRXH6qis/cOccYmzLDMA7DMM/z8gzyiV2ctfYA+y4FR4FSUuGTMgR/PLPvB5FKU0q11peZ935dV5/Bds0g+P/DC4REoXiaUkowk1L1/eB9iHE7tW2cz0IIpIYQUma7wWUiQsh3WQZ/dshmXr4/QtlljWYJbg199ymKomkaPEdmrnawxhiJMbaua5+L8dZxYigNMUEwZ1PfNC3ouk4IjinEX9AF4UK2XQsLCNNGXp6ZvsQoHU+mSxgQULcMGUf6epXaGK2NhoW1d6y/J6ey+/c86wdPKACelgb74QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"User Store Configurations\"\n        title=\"\"\n        src=\"/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-fb8a0.png\"\n        srcset=\"/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-1a291.png 148w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-2bc4a.png 295w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-fb8a0.png 590w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-526de.png 885w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-fa2eb.png 1180w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-08f6a.png 1770w,\n/static/user-store-configurations-a8a7ace193dd356e9df5c987d08d45f3-bb851.png 2840w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Click on <code class=\"language-text\">Add</code> to save and add the user-store in WSO2 API Manager. The following alert box will appear if the user-store is added correctly.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-4310c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvUlEQVQoz62Q3QrCMAyF+/7vpYPt0jbpTyYT3OaU4cB2oDBnFB1ScOzCw0co4ZykRCjQUqECRG1ycgjKOlookWbZap2skyRNM9Qa4DmGH0sQiO6D1ZqMIa6I9NV/w/0IAeAijCZy2zzfTRAVDLsjZxxGcLaoivLUHOpJbdt2XVfXjZR2Lsz3qo7ncL3fbtdJwzCM48gTNhvD//8ZVsru91UIwfve+/Civ1x8CH1ZHqQ0s5s5/wIWIGCZ7//hB4YgAf3D5MV6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Successful Alert Box\"\n        title=\"\"\n        src=\"/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-fb8a0.png\"\n        srcset=\"/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-1a291.png 148w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-2bc4a.png 295w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-fb8a0.png 590w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-526de.png 885w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-fa2eb.png 1180w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-08f6a.png 1770w,\n/static/successful-alert-box-7203239a97e5d03412dabc95de4a2818-4310c.png 2200w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>Run &#x26; Test</h2>\n<p>Direct to <a href=\"https://localhost:9444/carbon\"><code class=\"language-text\">https://localhost:9444/carbon</code></a> and select <code class=\"language-text\">List</code> under <code class=\"language-text\">Users and Roles</code> section and select <code class=\"language-text\">Users</code> from the prompted page to list all available users from all defined user-stores.</p>\n<p>You will see a similar page as follows …</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-ef9ea.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 35.52083333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0ElEQVQY02WP227EIAxE+f9P3L6moUsWm4Ax5rLZupESRc3RgJDHhsG4J3qfWEbmfhWXweW97/+tUwZ8mCYbVspcE5VTWgGMKj1Qlqt1yiTieZ4RkTMzl36gFWutWo+vBwCMMfoNw0UQARBFpLX2OSCiWmtvzTm3LG7bts8Nk1IOIWhf26kH3nvKWf7qXVfRuw9LdikmhOgBdEwuqAnonxBfgTSzjzx925/XGnGJKy4Q/JpLEaNh9a/3SBqCSsvS9U2u70iUWF/Qkcqlch3a8wvJD5OTjIjUvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Users List in WSO2 API Manager\"\n        title=\"\"\n        src=\"/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-fb8a0.png\"\n        srcset=\"/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-1a291.png 148w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-2bc4a.png 295w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-fb8a0.png 590w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-526de.png 885w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-fa2eb.png 1180w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-08f6a.png 1770w,\n/static/user-list-in-api-manager-5fd493fcf2a71e080a7fa9c81df45612-ef9ea.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Select <code class=\"language-text\">View Roles</code> of <code class=\"language-text\">IS/admin</code> user and click on <code class=\"language-text\">Permissions</code> of <code class=\"language-text\">IS/admin</code> role in the next page. Thereafter, select theLogin permission in the listed permission tree.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-ef9ea.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 65.72916666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzklEQVQoz5WSy47DIAxF+f/fG3W2s2iTNsaAeYTQgEndqtIsW67M8uiYKyt9c5e/CWZ0QGSiAfJuzRuvuX0cZW24zqjBTpMGsA4dUQgph/h5lFjAOLAx5tK4cZfH7buovTYfws14Stu9CtyPr6MaH6U85ehXwZmH4NZr3cHSYqPwIh8y91LKIj2lrY6Qb3Or1Yd4RX/R5GIegF8dsY9p0gTuWdoAzHyklMBQG6nqf21EBBeO8QjM5KP26y7H0cfkCtH+nH7P8yK/ve9jbT8Avif7pdBhTpoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Permission Tree of IS/admin Role\"\n        title=\"\"\n        src=\"/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-fb8a0.png\"\n        srcset=\"/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-1a291.png 148w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-2bc4a.png 295w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-fb8a0.png 590w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-526de.png 885w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-fa2eb.png 1180w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-08f6a.png 1770w,\n/static/permission-tree-13bf8bcccc30f9bd2750c8547ab65036-ef9ea.png 1920w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>And select Update to update the permission tree. Now, logout from the carbon console and again Sign-in using the following credentials …</p>\n<ul>\n<li>Username: <code class=\"language-text\">IS/admin</code></li>\n<li>Password: <code class=\"language-text\">admin</code></li>\n</ul>\n<blockquote>\n<p>The above-mentioned credentials are related to the admin user of the secondary user-store</p>\n</blockquote>\n<p>After a successful login, the management console will be displayed with allowed features set and panels (allowed permissions).</p>\n<hr class=\"three--dots\"/>","frontmatter":{"title":"Configure LDAP as a Secondary User Store","intro":"WSO2 API Manager & Identity Server: LDAP User Store","tags":["wso2","wso2-api-manager","wso2-identity-server","ldap"],"author":"Athiththan"}}},"pageContext":{"slug":"/Configure-LDAP-as-a-Secondary-User-Store/","node_id":"346a4c97-41be-54bc-a837-d58aab82a714","nodePath":"/Configure-LDAP-as-a-Secondary-User-Store/","nodeType":"sheet","title":"Configure LDAP as a Secondary User Store","category":"WSO2","weight":-1,"updated":"2019-09-08T00:00:00.000Z","author":"Athiththan","short":"A Quick Guide Configuring a Secondary User Store","tags":["wso2","wso2-api-manager","wso2-identity-server","ldap"]}}